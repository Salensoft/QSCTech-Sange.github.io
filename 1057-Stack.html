<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><title>&lt;Python&gt;&lt;PAT&gt; 1057 Stack | 三个技术小站</title><meta name="description" content="高难度，不用树状数组，红黑树等方法的话很有挑战性，而前面几个又是超纲内容。"><meta name="keywords" content="PAT,题解,桶排"><meta name="author" content="杨宇昊"><meta name="copyright" content="杨宇昊"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/red_shark.webp"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin><link rel="preconnect" href="https://hm.baidu.com"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="google-site-verification" content="ykFGsmFH8M0zGBTxnp6wJbCxJCcrr-5_xEd74sfqA6s"><meta name="msvalidate.01" content="B9612ADF0D9A92F7A76CC3705B2645F6"><meta name="360-site-verification" content="4417b2a102039ff12038fca1701a3618"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="&lt;Python&gt;&lt;PAT&gt; 1057 Stack"><meta name="twitter:description" content="高难度，不用树状数组，红黑树等方法的话很有挑战性，而前面几个又是超纲内容。"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/PAT-cover.webp"><meta property="og:type" content="article"><meta property="og:title" content="&lt;Python&gt;&lt;PAT&gt; 1057 Stack"><meta property="og:url" content="https://qsctech-sange.github.io/1057-Stack"><meta property="og:site_name" content="三个技术小站"><meta property="og:description" content="高难度，不用树状数组，红黑树等方法的话很有挑战性，而前面几个又是超纲内容。"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/PAT-cover.webp"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = '1'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><link rel="canonical" href="https://qsctech-sange.github.io/1057-Stack"><link rel="prev" title="&lt;Python&gt;&lt;PAT&gt; 1058 A+B in Hogwarts" href="https://qsctech-sange.github.io/1058-A-B-in-Hogwarts.html"><link rel="next" title="&lt;Python&gt;&lt;PAT&gt; 1056 Mice and Rice" href="https://qsctech-sange.github.io/1056-Mice-and-Rice.html"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?bbe3106fee7fc090c2fbe9fa14e2ea91";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', '156936411-1', 'auto');
ga('send', 'pageview');
</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  translate: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: {"languages":{"author":"作者: 杨宇昊","link":"链接: https://qsctech-sange.github.io/1057-Stack","source":"来源: 三个技术小站","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: {"bookmark":{"title":"Snackbar.bookmark.title","message_prev":"按","message_next":"键将本页加入书签"},"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"},
  baiduPush: true,
  isHome: false,
  isPost: true
  
}</script></head><body><canvas class="fireworks"></canvas><header> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">三个技术小站</a></span><span class="toggle-menu pull_right close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 文章</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 娱乐</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-link"></i><span> 音乐</span></a></li><li><a class="site-page" href="/gallery/"><i class="fa-fw fa fa-photo"></i><span> 相册</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于我</span></a></div></div></span><span class="pull_right" id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> 搜索</span></a></span></div></header><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/red_shark.webp" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">241</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">67</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">17</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 文章</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 娱乐</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-link"></i><span> 音乐</span></a></li><li><a class="site-page" href="/gallery/"><i class="fa-fw fa fa-photo"></i><span> 相册</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于我</span></a></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">目录</div><div class="sidebar-toc__content"><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#题目"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text"> 题目</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#input-specification"><span class="toc_mobile_items-number">1.0.1.</span> <span class="toc_mobile_items-text"> Input Specification:</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#output-specification"><span class="toc_mobile_items-number">1.0.2.</span> <span class="toc_mobile_items-text"> Output Specification:</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#sample-input"><span class="toc_mobile_items-number">1.0.3.</span> <span class="toc_mobile_items-text"> Sample Input:</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#sample-output"><span class="toc_mobile_items-number">1.0.4.</span> <span class="toc_mobile_items-text"> Sample Output:</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#题解"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text"> 题解</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#思路"><span class="toc_mobile_items-number">2.1.</span> <span class="toc_mobile_items-text"> 思路</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#数据结构"><span class="toc_mobile_items-number">2.2.</span> <span class="toc_mobile_items-text"> 数据结构</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#算法"><span class="toc_mobile_items-number">2.3.</span> <span class="toc_mobile_items-text"> 算法</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#代码"><span class="toc_mobile_items-number">2.4.</span> <span class="toc_mobile_items-text"> 代码</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#暴力法"><span class="toc_mobile_items-number">2.4.1.</span> <span class="toc_mobile_items-text"> 暴力法</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#桶排法"><span class="toc_mobile_items-number">2.4.2.</span> <span class="toc_mobile_items-text"> 桶排法</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#二层桶排法-python"><span class="toc_mobile_items-number">2.4.3.</span> <span class="toc_mobile_items-text"> 二层桶排法 Python</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#二层桶排法-c"><span class="toc_mobile_items-number">2.4.4.</span> <span class="toc_mobile_items-text"> 二层桶排法 C++</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#三层桶排法-python"><span class="toc_mobile_items-number">2.4.5.</span> <span class="toc_mobile_items-text"> 三层桶排法 Python</span></a></li></ol></li></ol></li></ol></div></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#题目"><span class="toc-number">1.</span> <span class="toc-text"> 题目</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#input-specification"><span class="toc-number">1.0.1.</span> <span class="toc-text"> Input Specification:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#output-specification"><span class="toc-number">1.0.2.</span> <span class="toc-text"> Output Specification:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sample-input"><span class="toc-number">1.0.3.</span> <span class="toc-text"> Sample Input:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sample-output"><span class="toc-number">1.0.4.</span> <span class="toc-text"> Sample Output:</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#题解"><span class="toc-number">2.</span> <span class="toc-text"> 题解</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#思路"><span class="toc-number">2.1.</span> <span class="toc-text"> 思路</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数据结构"><span class="toc-number">2.2.</span> <span class="toc-text"> 数据结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#算法"><span class="toc-number">2.3.</span> <span class="toc-text"> 算法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#代码"><span class="toc-number">2.4.</span> <span class="toc-text"> 代码</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#暴力法"><span class="toc-number">2.4.1.</span> <span class="toc-text"> 暴力法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#桶排法"><span class="toc-number">2.4.2.</span> <span class="toc-text"> 桶排法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#二层桶排法-python"><span class="toc-number">2.4.3.</span> <span class="toc-text"> 二层桶排法 Python</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#二层桶排法-c"><span class="toc-number">2.4.4.</span> <span class="toc-text"> 二层桶排法 C++</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#三层桶排法-python"><span class="toc-number">2.4.5.</span> <span class="toc-text"> 三层桶排法 Python</span></a></li></ol></li></ol></li></ol></div></div></div><main id="content-outer"><div id="top-container" style="background-image: url(https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/PAT-top.webp)"><div id="post-info"><div id="post-title"><div class="posttitle">&lt;Python&gt;&lt;PAT&gt; 1057 Stack</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 发表于 2019-08-28<span class="post-meta__separator">|</span><i class="fa fa-history fa-fw" aria-hidden="true"></i> 更新于 2020-01-25</time><span class="post-meta__separator">|</span><span><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/PAT/">PAT</a></span><div class="post-meta-wordcount"><i class="fa fa-file-word-o post-meta__icon fa-fw" aria-hidden="true"></i><span>字数总计:</span><span class="word-count">1.5k</span><span class="post-meta__separator">|</span><i class="fa fa-clock-o post-meta__icon fa-fw" aria-hidden="true"></i><span>阅读时长: 7 分钟</span><div class="post-meta-pv-cv"><span class="post-meta__separator">|</span><span><i class="fa fa-eye post-meta__icon fa-fw" aria-hidden="true"> </i>阅读量:</span><span id="busuanzi_value_page_pv"></span><span class="post-meta__separator">|</span><i class="fa fa-comments-o post-meta__icon fa-fw" aria-hidden="true"></i><span>评论数:</span><a href="/1057-Stack.html#post-comment" itemprop="discussionUrl"><span class="valine-comment-count comment-count" data-xid="/1057-Stack.html" itemprop="commentCount"></span></a></div></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h1 id="题目"><a class="markdownIt-Anchor" href="#题目"></a> 题目</h1>
<p>Stack is one of the most fundamental data structures, which is based on the principle of Last In First Out (LIFO). The basic operations include Push (inserting an element onto the top position) and Pop (deleting the top element). Now you are supposed to implement a stack with an extra operation: PeekMedian – return the median value of all the elements in the stack. With <em>N</em> elements, the median value is defined to be the (<em>N</em>/2)-th smallest element if <em>N</em> is even, or <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>N</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mn>2</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">((N+1) / 2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mord">/</span><span class="mord">2</span><span class="mclose">)</span></span></span></span>-th if <em>N</em> is odd.</p>
<h3 id="input-specification"><a class="markdownIt-Anchor" href="#input-specification"></a> Input Specification:</h3>
<p>Each input file contains one test case. For each case, the first line contains a positive integer <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>N</mi><mrow><mo fence="true">(</mo><mo>≤</mo><mn>1</mn><msup><mn>0</mn><mn>5</mn></msup><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">N\left( \leq 10^{5}\right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.20001em;vertical-align:-0.35001em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size1">(</span></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size1">)</span></span></span></span></span></span>. Then <em>N</em> lines follow, each contains a command in one of the following 3 formats:</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Push key</span><br><span class="line">Pop</span><br><span class="line">PeekMedian</span><br></pre></td></tr></table></figure></div>
<p>where <code>key</code> is a positive integer no more than 105.</p>
<h3 id="output-specification"><a class="markdownIt-Anchor" href="#output-specification"></a> Output Specification:</h3>
<p>For each <code>Push</code> command, insert <code>key</code> into the stack and output nothing. For each <code>Pop</code> or <code>PeekMedian</code> command, print in a line the corresponding returned value. If the command is invalid, print <code>Invalid</code> instead.</p>
<h3 id="sample-input"><a class="markdownIt-Anchor" href="#sample-input"></a> Sample Input:</h3>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">17</span><br><span class="line">Pop</span><br><span class="line">PeekMedian</span><br><span class="line">Push 3</span><br><span class="line">PeekMedian</span><br><span class="line">Push 2</span><br><span class="line">PeekMedian</span><br><span class="line">Push 1</span><br><span class="line">PeekMedian</span><br><span class="line">Pop</span><br><span class="line">Pop</span><br><span class="line">Push 5</span><br><span class="line">Push 4</span><br><span class="line">PeekMedian</span><br><span class="line">Pop</span><br><span class="line">Pop</span><br><span class="line">Pop</span><br><span class="line">Pop</span><br></pre></td></tr></table></figure></div>
<h3 id="sample-output"><a class="markdownIt-Anchor" href="#sample-output"></a> Sample Output:</h3>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Invalid</span><br><span class="line">Invalid</span><br><span class="line">3</span><br><span class="line">2</span><br><span class="line">2</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">4</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">3</span><br><span class="line">Invalid</span><br></pre></td></tr></table></figure></div>
<h1 id="题解"><a class="markdownIt-Anchor" href="#题解"></a> 题解</h1>
<h2 id="思路"><a class="markdownIt-Anchor" href="#思路"></a> 思路</h2>
<ul>
<li>这道题首先可以想到的是暴力法</li>
<li>即模拟一个栈，每次输出的时候排序找中值</li>
<li>会过两个点</li>
<li>另一种思想是使用桶排</li>
<li>首先模拟一个栈</li>
<li>但是要增加一个长度为100000的数组</li>
<li>称为10万个桶，记录一个数出现了多少次。下标是数，值是这个数出现了多少次。</li>
<li>如果用数插进来了，更新栈的同时</li>
<li>桶的对应下标也要加一</li>
<li>pop的同时也更新桶</li>
<li>在查找的时候，先计算要找从小到大的第几个数</li>
<li>再从桶的下标0开始遍历
<ul>
<li>不断记录count，它不断加上桶对应下标的值</li>
<li>当count到了要找的数的时候，输出它并break</li>
</ul>
</li>
<li>然而这种方法也会超时</li>
<li>因为十万个桶遍历起来依然太慢了。</li>
<li>更好地方法是设立双层桶。</li>
<li>第一个桶存放每1000个数出现了几次</li>
<li>第二个桶是双层的，第一层有100个，对应于第1个桶的下标，第二层对应具体的数。</li>
<li>比如说我读了一个数，叫32145，那么给第一个桶的下标32的值加一</li>
<li>然后给第二个桶的第一层的第32个，对应这个第32个桶的第145个下标加一</li>
<li>这样遍历次数最多就是1000+100次，从十万次减少到了1100次</li>
<li>这样做的弊端就是空间复杂度会增加，又需要十万个int类型的空间。</li>
<li>C++使用双层桶已经可以过全部测试点了</li>
<li>可以想到，可以玩三层桶，四层桶的方向上做。</li>
<li>然而在Python中，即便使用三层桶，将遍历次数减少到210次，也会超时。三层桶已经比较抽象了。</li>
<li>还有诸如树状数组，红黑树之类的超纲算法就不讨论了。</li>
</ul>
<h2 id="数据结构"><a class="markdownIt-Anchor" href="#数据结构"></a> 数据结构</h2>
<ul>
<li>stk 是真实的栈</li>
<li>bucket 是桶</li>
</ul>
<h2 id="算法"><a class="markdownIt-Anchor" href="#算法"></a> 算法</h2>
<ul>
<li>
<p>算法基本都写在题解里了</p>
</li>
<li>
<p>双层三层桶理解得困难的话，可以先从单层桶理解。</p>
</li>
</ul>
<h2 id="代码"><a class="markdownIt-Anchor" href="#代码"></a> 代码</h2>
<ul>
<li>这道题对时间咬得很近，经测试C++在双层的情况下能通过，而Python即便在三层的状态下也通过不了。</li>
</ul>
<h3 id="暴力法"><a class="markdownIt-Anchor" href="#暴力法"></a> 暴力法</h3>
<ul>
<li>每次输出中值都排序一下，这个方法只能过两个点。</li>
</ul>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">stk = []    <span class="comment"># 栈</span></span><br><span class="line">commands = int(input())</span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> range(commands):</span><br><span class="line">    info = input()</span><br><span class="line">    <span class="keyword">if</span> info == <span class="string">"Pop"</span>:</span><br><span class="line">        <span class="keyword">if</span> len(stk) == <span class="number">0</span>:</span><br><span class="line">            print(<span class="string">"Invalid"</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            print(stk.pop())</span><br><span class="line">    <span class="keyword">elif</span> info == <span class="string">"PeekMedian"</span>:</span><br><span class="line">        <span class="keyword">if</span> len(stk) != <span class="number">0</span>:</span><br><span class="line">            print(sorted(stk)[(len(stk) - <span class="number">1</span>)//<span class="number">2</span>])</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            print(<span class="string">"Invalid"</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        num = int(info.split()[<span class="number">1</span>])</span><br><span class="line">        stk.append(num)</span><br></pre></td></tr></table></figure></div>
<h3 id="桶排法"><a class="markdownIt-Anchor" href="#桶排法"></a> 桶排法</h3>
<ul>
<li>只过了两个点，耗时还更多了……</li>
</ul>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">bucket = [<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">100001</span>)]</span><br><span class="line">stk = []</span><br><span class="line">commands = int(input())</span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> range(commands):</span><br><span class="line">    info = input()</span><br><span class="line">    <span class="keyword">if</span> info == <span class="string">"Pop"</span>:</span><br><span class="line">        <span class="keyword">if</span> len(stk) == <span class="number">0</span>:</span><br><span class="line">            print(<span class="string">"Invalid"</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            bucket[stk[<span class="number">-1</span>]] -= <span class="number">1</span></span><br><span class="line">            print(stk.pop())</span><br><span class="line">    <span class="keyword">elif</span> info == <span class="string">"PeekMedian"</span>:</span><br><span class="line">        <span class="keyword">if</span> len(stk) != <span class="number">0</span>:</span><br><span class="line">            target = (len(stk) + <span class="number">1</span>) // <span class="number">2</span></span><br><span class="line">            index = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> num, count <span class="keyword">in</span> enumerate(bucket):</span><br><span class="line">                index += count</span><br><span class="line">                <span class="keyword">if</span> index &gt;= target:</span><br><span class="line">                    print(num)</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            print(<span class="string">"Invalid"</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        num = int(info.split()[<span class="number">1</span>])</span><br><span class="line">        bucket[num] += <span class="number">1</span></span><br><span class="line">        stk.append(num)</span><br></pre></td></tr></table></figure></div>
<h3 id="二层桶排法-python"><a class="markdownIt-Anchor" href="#二层桶排法-python"></a> 二层桶排法 Python</h3>
<ul>
<li>由于对Python不友好，依然只能过两个点</li>
</ul>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">bucket_count = [<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">100</span>)]</span><br><span class="line">bucket = [[<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">1000</span>)] <span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">100</span>)]</span><br><span class="line">stk = []</span><br><span class="line">commands = int(input())</span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> range(commands):</span><br><span class="line">    info = input()</span><br><span class="line">    <span class="keyword">if</span> info == <span class="string">"Pop"</span>:</span><br><span class="line">        <span class="keyword">if</span> len(stk) == <span class="number">0</span>:</span><br><span class="line">            print(<span class="string">"Invalid"</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            num = stk[<span class="number">-1</span>]</span><br><span class="line">            bucket[num // <span class="number">1000</span>][num % <span class="number">1000</span>] -= <span class="number">1</span></span><br><span class="line">            bucket_count[num // <span class="number">1000</span>] -= <span class="number">1</span></span><br><span class="line">            print(stk.pop())</span><br><span class="line">    <span class="keyword">elif</span> info == <span class="string">"PeekMedian"</span>:</span><br><span class="line">        <span class="keyword">if</span> len(stk) != <span class="number">0</span>:</span><br><span class="line">            target = (len(stk) + <span class="number">1</span>) // <span class="number">2</span></span><br><span class="line">            index = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> num, count <span class="keyword">in</span> enumerate(bucket_count):</span><br><span class="line">                index += count</span><br><span class="line">                <span class="keyword">if</span> index &gt;= target:</span><br><span class="line">                    index -= count</span><br><span class="line">                    <span class="keyword">for</span> num_2, count_2 <span class="keyword">in</span> enumerate(bucket[num]):</span><br><span class="line">                        index += count_2</span><br><span class="line">                        <span class="keyword">if</span> index &gt;= target:</span><br><span class="line">                            print(num * <span class="number">100</span> + num_2)</span><br><span class="line">                            <span class="keyword">break</span></span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            print(<span class="string">"Invalid"</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        num = int(info.split()[<span class="number">1</span>])</span><br><span class="line">        bucket_count[num // <span class="number">1000</span>] += <span class="number">1</span></span><br><span class="line">        bucket[num // <span class="number">1000</span>][num % <span class="number">1000</span>] += <span class="number">1</span></span><br><span class="line">        stk.append(num)</span><br></pre></td></tr></table></figure></div>
<h3 id="二层桶排法-c"><a class="markdownIt-Anchor" href="#二层桶排法-c"></a> 二层桶排法 C++</h3>
<ul>
<li>稳</li>
</ul>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">c++</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> bucket_count[<span class="number">100</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> &amp;i : bucket_count)</span><br><span class="line">        i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> bucket[<span class="number">100</span>][<span class="number">1000</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;i : bucket) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> &amp;j : i)</span><br><span class="line">            j = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; stk;</span><br><span class="line">    <span class="keyword">int</span> commands;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;commands);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; commands; i++) &#123;</span><br><span class="line">        <span class="built_in">string</span> command;</span><br><span class="line">        command.resize(<span class="number">10</span>);</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; command;</span><br><span class="line">        <span class="keyword">if</span> (command == <span class="string">"Pop"</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (stk.<span class="built_in">size</span>() == <span class="number">0</span>)</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"Invalid\n"</span>);</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">int</span> num = stk.back();</span><br><span class="line">                bucket[num / <span class="number">1000</span>][num % <span class="number">1000</span>] -= <span class="number">1</span>;</span><br><span class="line">                bucket_count[num / <span class="number">1000</span>] -= <span class="number">1</span>;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, stk.back());</span><br><span class="line">                stk.pop_back();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (command == <span class="string">"PeekMedian"</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!stk.empty()) &#123;</span><br><span class="line">                <span class="keyword">int</span> target = (stk.<span class="built_in">size</span>() + <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">                <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> num = <span class="number">0</span>; num &lt; <span class="number">100</span>; num++) &#123;</span><br><span class="line">                    index += bucket_count[num];</span><br><span class="line">                    <span class="keyword">if</span> (index &gt;= target) &#123;</span><br><span class="line">                        index -= bucket_count[num];</span><br><span class="line">                        <span class="keyword">for</span> (<span class="keyword">int</span> num_2 = <span class="number">0</span>; num_2 &lt; <span class="number">1000</span>; num_2++) &#123;</span><br><span class="line">                            index += bucket[num][num_2];</span><br><span class="line">                            <span class="keyword">if</span> (index &gt;= target) &#123;</span><br><span class="line">                                <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, num * <span class="number">1000</span> + num_2);</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span></span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"Invalid\n"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">int</span> num;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;num);</span><br><span class="line">            bucket_count[num / <span class="number">1000</span>] += <span class="number">1</span>;</span><br><span class="line">            bucket[num / <span class="number">1000</span>][num % <span class="number">1000</span>] += <span class="number">1</span>;</span><br><span class="line">            stk.push_back(num);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<h3 id="三层桶排法-python"><a class="markdownIt-Anchor" href="#三层桶排法-python"></a> 三层桶排法 Python</h3>
<ul>
<li>Python用三层依然过不了，只有两个点能过。</li>
</ul>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">bucket_1 = [<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">100</span>)]</span><br><span class="line">bucket_2 = [[<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">100</span>)] <span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">100</span>)]</span><br><span class="line">bucket_3 = [[[<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">10</span>)] <span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">100</span>)] <span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">100</span>)]</span><br><span class="line">stk = []</span><br><span class="line">commands = int(input())</span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> range(commands):</span><br><span class="line">    info = input()</span><br><span class="line">    <span class="keyword">if</span> info == <span class="string">"Pop"</span>:</span><br><span class="line">        <span class="keyword">if</span> len(stk) == <span class="number">0</span>:</span><br><span class="line">            print(<span class="string">"Invalid"</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            num = stk[<span class="number">-1</span>]</span><br><span class="line">            bucket_3[num // <span class="number">1000</span>][(num % <span class="number">1000</span>)//<span class="number">10</span>][num % <span class="number">10</span>] -= <span class="number">1</span></span><br><span class="line">            bucket_2[num // <span class="number">1000</span>][(num % <span class="number">1000</span>)//<span class="number">10</span>] -= <span class="number">1</span></span><br><span class="line">            bucket_1[num // <span class="number">1000</span>] -= <span class="number">1</span></span><br><span class="line">            print(stk.pop())</span><br><span class="line">    <span class="keyword">elif</span> info == <span class="string">"PeekMedian"</span>:</span><br><span class="line">        <span class="keyword">if</span> len(stk) != <span class="number">0</span>:</span><br><span class="line">            target = (len(stk) + <span class="number">1</span>) // <span class="number">2</span></span><br><span class="line">            index = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> num, count <span class="keyword">in</span> enumerate(bucket_1):</span><br><span class="line">                index += count</span><br><span class="line">                <span class="keyword">if</span> index &gt;= target:</span><br><span class="line">                    index -= count</span><br><span class="line">                    <span class="keyword">for</span> num_2, count_2 <span class="keyword">in</span> enumerate(bucket_2[num]):</span><br><span class="line">                        index += count_2</span><br><span class="line">                        <span class="keyword">if</span> index &gt;= target:</span><br><span class="line">                            index -= count_2</span><br><span class="line">                            <span class="keyword">for</span> num_3, count_3 <span class="keyword">in</span> enumerate(bucket_3[num][num_2]):</span><br><span class="line">                                index += count_3</span><br><span class="line">                                <span class="keyword">if</span> index &gt;= target:</span><br><span class="line">                                    print(num * <span class="number">1000</span> + num_2 * <span class="number">10</span> + num_3)</span><br><span class="line">                                    <span class="keyword">break</span></span><br><span class="line">                            <span class="keyword">break</span></span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            print(<span class="string">"Invalid"</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        num = int(info.split()[<span class="number">1</span>])</span><br><span class="line">        bucket_3[num // <span class="number">1000</span>][(num % <span class="number">1000</span>)//<span class="number">10</span>][num % <span class="number">10</span>] += <span class="number">1</span></span><br><span class="line">        bucket_2[num // <span class="number">1000</span>][(num % <span class="number">1000</span>)//<span class="number">10</span>] += <span class="number">1</span></span><br><span class="line">        bucket_1[num // <span class="number">1000</span>] += <span class="number">1</span></span><br><span class="line">        stk.append(num)</span><br></pre></td></tr></table></figure></div>
</div></article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/PAT/">PAT    </a><a class="post-meta__tags" href="/tags/%E9%A2%98%E8%A7%A3/">题解    </a><a class="post-meta__tags" href="/tags/%E6%A1%B6%E6%8E%92/">桶排    </a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/PAT-cover.webp" data-sites="wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/wechat.webp" alt="微信"><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/alipay.webp" alt="支付宝"><div class="post-qr-code__desc">支付宝</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/1058-A-B-in-Hogwarts.html"><img class="prev_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/PAT-cover.webp" onerror="onerror=null;src='/img/404.jpg'"><div class="label">上一篇</div><div class="prev_info"><span>&lt;Python&gt;&lt;PAT&gt; 1058 A+B in Hogwarts</span></div></a></div><div class="next-post pull_right"><a href="/1056-Mice-and-Rice.html"><img class="next_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/PAT-cover.webp" onerror="onerror=null;src='/img/404.jpg'"><div class="label">下一篇</div><div class="next_info"><span>&lt;Python&gt;&lt;PAT&gt; 1056 Mice and Rice</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/1147-Heaps.html" title="<Python><PAT> 1147 Heaps"><img class="relatedPosts_cover lazyload"data-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/PAT-cover.webp"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2019-09-07</div><div class="relatedPosts_title"><Python><PAT> 1147 Heaps</div></div></a></div><div class="relatedPosts_item"><a href="/1151-LCA-in-a-Binary-Tree.html" title="<Python><PAT> 1151 LCA in a Binary Tree"><img class="relatedPosts_cover lazyload"data-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/PAT-cover.webp"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2019-09-07</div><div class="relatedPosts_title"><Python><PAT> 1151 LCA in a Binary Tree</div></div></a></div><div class="relatedPosts_item"><a href="/1143-Lowest-Common-Ancestor.html" title="<Python><PAT> 1143 Lowest Common Ancestor"><img class="relatedPosts_cover lazyload"data-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/PAT-cover.webp"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2019-09-07</div><div class="relatedPosts_title"><Python><PAT> 1143 Lowest Common Ancestor</div></div></a></div><div class="relatedPosts_item"><a href="/1155-Heap-Paths.html" title="<Python><PAT> 1155 Heap Paths"><img class="relatedPosts_cover lazyload"data-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/PAT-cover.webp"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2019-09-07</div><div class="relatedPosts_title"><Python><PAT> 1155 Heap Paths</div></div></a></div><div class="relatedPosts_item"><a href="/1154-Vertex-Coloring.html" title="<Python><PAT> 1154 Vertex Coloring"><img class="relatedPosts_cover lazyload"data-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/PAT-cover.webp"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2019-09-07</div><div class="relatedPosts_title"><Python><PAT> 1154 Vertex Coloring</div></div></a></div><div class="relatedPosts_item"><a href="/1153-Decode-Registration-Card-of-PAT.html" title="<Python><PAT> 1153 Decode Registration Card of PAT"><img class="relatedPosts_cover lazyload"data-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/PAT-cover.webp"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2019-09-07</div><div class="relatedPosts_title"><Python><PAT> 1153 Decode Registration Card of PAT</div></div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var notify = true == true ? true : false;
var verify = false == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;

window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'4z8dfu0wvumOs1BjFBJ5jUQ3-gzGzoHsz',
  appKey:'ikfFd8mKVK80FpjJve5nhHVF',
  placeholder:'ヾﾉ≧∀≦)o来啊，快活啊! 如果在上方留下邮箱，那么当有人回复你时，你会受到邮件通知。',
  avatar:'wavatar',
  guest_info:guest_info,
  pageSize:'10',
  lang:'zh-cn',
  recordIP: true
});</script></div></div></main><footer id="footer" style="background-image: url(https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/PAT-top.webp)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2020 By 杨宇昊</div><div class="footer_custom_text">我怎么就这么菜啊！</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css"><script>$(function () {
  $('span.katex-display').wrap('<div class="katex-wrap"></div>')
})</script><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/js/fireworks.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script id="ribbon_piao" mobile="false" src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/js/piao.js"></script><script id="canvas_nest" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/js/canvas-nest.js"></script><script src="https://cdn.jsdelivr.net/npm/activate-power-mode/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false; 
document.body.addEventListener('input', POWERMODE);
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>